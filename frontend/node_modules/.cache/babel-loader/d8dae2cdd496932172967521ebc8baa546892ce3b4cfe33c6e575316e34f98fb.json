{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\muham\\\\Week6\\\\Week8lab2\\\\frontend\\\\src\\\\components\\\\BookForm.js\",\n  _s = $RefreshSig$();\n// src/components/BookForm.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BookForm({\n  refreshBooks,\n  selectedBook,\n  setSelectedBook\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    genre: '',\n    publicationYear: '',\n    quantityAvailable: '',\n    price: ''\n  });\n\n  // Если выбрана книга для редактирования, заполняем форму её данными\n  useEffect(() => {\n    if (selectedBook) {\n      setFormData({\n        title: selectedBook.title,\n        author: selectedBook.author,\n        genre: selectedBook.genre || '',\n        publicationYear: selectedBook.publicationYear || '',\n        quantityAvailable: selectedBook.quantityAvailable || '',\n        price: selectedBook.price\n      });\n    }\n  }, [selectedBook]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (selectedBook) {\n        // Редактирование книги\n        await axios.put(`http://localhost:5000/api/books/${selectedBook._id}`, formData);\n      } else {\n        // Добавление новой книги\n        await axios.post('http://localhost:5000/api/books', formData);\n      }\n      setFormData({\n        title: '',\n        author: '',\n        genre: '',\n        publicationYear: '',\n        quantityAvailable: '',\n        price: ''\n      });\n      setSelectedBook(null);\n      refreshBooks();\n    } catch (error) {\n      console.error('Ошибка при сохранении книги:', error);\n    }\n  };\n  const handleCancel = () => {\n    setSelectedBook(null);\n    setFormData({\n      title: '',\n      author: '',\n      genre: '',\n      publicationYear: '',\n      quantityAvailable: '',\n      price: ''\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: selectedBook ? 'Edit Book' : 'Add Book'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        placeholder: \"\",\n        value: formData.title,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"author\",\n        placeholder: \"\\u0410\\u0432\\u0442\\u043E\\u0440\",\n        value: formData.author,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"genre\",\n        placeholder: \"\\u0416\\u0430\\u043D\\u0440\",\n        value: formData.genre,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"publicationYear\",\n        placeholder: \"\\u0413\\u043E\\u0434 \\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438\",\n        value: formData.publicationYear,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"quantityAvailable\",\n        placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434\\u0435\",\n        value: formData.quantityAvailable,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        step: \"0.01\",\n        name: \"price\",\n        placeholder: \"\\u0426\\u0435\\u043D\\u0430\",\n        value: formData.price,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: selectedBook ? 'Обновить книгу' : 'Добавить книгу'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), selectedBook && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleCancel,\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(BookForm, \"PKm+7BfjhbbzCIOio7fgdq/oyfg=\");\n_c = BookForm;\nexport default BookForm;\nvar _c;\n$RefreshReg$(_c, \"BookForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","BookForm","refreshBooks","selectedBook","setSelectedBook","_s","formData","setFormData","title","author","genre","publicationYear","quantityAvailable","price","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","put","_id","post","error","console","handleCancel","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","required","step","onClick","_c","$RefreshReg$"],"sources":["C:/Users/muham/Week6/Week8lab2/frontend/src/components/BookForm.js"],"sourcesContent":["// src/components/BookForm.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction BookForm({ refreshBooks, selectedBook, setSelectedBook }) {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    author: '',\r\n    genre: '',\r\n    publicationYear: '',\r\n    quantityAvailable: '',\r\n    price: '',\r\n  });\r\n\r\n  // Если выбрана книга для редактирования, заполняем форму её данными\r\n  useEffect(() => {\r\n    if (selectedBook) {\r\n      setFormData({\r\n        title: selectedBook.title,\r\n        author: selectedBook.author,\r\n        genre: selectedBook.genre || '',\r\n        publicationYear: selectedBook.publicationYear || '',\r\n        quantityAvailable: selectedBook.quantityAvailable || '',\r\n        price: selectedBook.price,\r\n      });\r\n    }\r\n  }, [selectedBook]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (selectedBook) {\r\n        // Редактирование книги\r\n        await axios.put(`http://localhost:5000/api/books/${selectedBook._id}`, formData);\r\n      } else {\r\n        // Добавление новой книги\r\n        await axios.post('http://localhost:5000/api/books', formData);\r\n      }\r\n      setFormData({\r\n        title: '',\r\n        author: '',\r\n        genre: '',\r\n        publicationYear: '',\r\n        quantityAvailable: '',\r\n        price: '',\r\n      });\r\n      setSelectedBook(null);\r\n      refreshBooks();\r\n    } catch (error) {\r\n      console.error('Ошибка при сохранении книги:', error);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSelectedBook(null);\r\n    setFormData({\r\n      title: '',\r\n      author: '',\r\n      genre: '',\r\n      publicationYear: '',\r\n      quantityAvailable: '',\r\n      price: '',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <h2>{selectedBook ? 'Edit Book' : 'Add Book'}</h2>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          placeholder=\"\"\r\n          value={formData.title}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          name=\"author\"\r\n          placeholder=\"Автор\"\r\n          value={formData.author}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          name=\"genre\"\r\n          placeholder=\"Жанр\"\r\n          value={formData.genre}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"number\"\r\n          name=\"publicationYear\"\r\n          placeholder=\"Год публикации\"\r\n          value={formData.publicationYear}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"number\"\r\n          name=\"quantityAvailable\"\r\n          placeholder=\"Количество на складе\"\r\n          value={formData.quantityAvailable}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          name=\"price\"\r\n          placeholder=\"Цена\"\r\n          value={formData.price}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">{selectedBook ? 'Обновить книгу' : 'Добавить книгу'}</button>\r\n        {selectedBook && <button type=\"button\" onClick={handleCancel}>Отмена</button>}\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default BookForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}